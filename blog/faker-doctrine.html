<!DOCTYPE html><html><head><link rel="stylesheet" href="/css/main.css"></head><body><header><h1> <a href="/index">cam.bio</a></h1></header><div id="content"><nav><a href="/blog">Blog</a><a href="/about">About</a><a href="https://www.linkedin.com/in/cpayan">Resume</a></nav><h2>Using Faker with Doctrine 2</h2><h2>Introduction</h2><p><a href="https://github.com/fzaninotto/Faker">Faker</a> is a great PHP library for creating
realistic looking data for prototyping and validating your project. That project
might be using <a href="http://www.doctrine-project.org/">Doctrine 2</a>, which is a PHP
ORM for mapping your database tables to PHP objects in your code. If you&#39;re
using Doctrine, you&#39;ll want to use it to insert your fake data for testing or
prototyping.</p>
<h2>Using Faker with Doctrine</h2><p>I&#39;m assuming that at this point, you&#39;ve already got Doctrine wired up to
whatever database you&#39;re using, and you&#39;re ready to fill your DB with fake data.</p>
<p>First, we&#39;ll install Faker using <code>composer require
fzaninotto/faker</code>.</p>
<p>Next, we&#39;ll make a <code>bootstrap_database.php</code> file that&#39;s going to need your
entity manager from Doctrine.</p>
<pre><code>&lt;?php
 require &#39;vendor/autoload.php&#39;;

 use Doctrine\ORM\EntityManager;
 use Doctrine\ORM\Tools\Setup;

 $path = array(&#39;PATH TO YOUR ENTITIES&#39;);
 $devMode = true;

 $config = Setup::createAnnotationMetadataConfiguration($path, $devMode);

 $dbParams = array(
     &#39;driver&#39;        =&gt; &#39;pdo_mysql&#39;,
    &#39;user&#39;        =&gt; &#39;YOUR DATABASE USERNAME&#39;,
    &#39;password&#39;    =&gt; &#39;YOUR DATABASE PASSWORD&#39;,
    &#39;dbname&#39;        =&gt; &#39;YOUR DATABASE NAME&#39;,
    &#39;host&#39;        =&gt; &#39;YOUR DATABASE HOST&#39;
 );

 $em = EntityManager::create($dbParams, $config);
</code></pre><p>If that looks familiar to you, that&#39;s because it&#39;s pretty vanilla setup code for
Doctrine. The next step is, of course, inserting our data using Faker. Let&#39;s
pretend we&#39;ve got a User entity set up with the namespace <code>\App\Entity\User</code>.
The rest of our <code>bootstrap_database.php</code> file will look like this:</p>
<pre><code>//Create your Faker generator
$generator = \Faker\Factory::create();

 /* Give the Faker populator the EntityManager object from Doctrine, as well
 *  as the Faker Generator
 */
 $populator = new Faker\ORM\Doctrine\Populator($generator, $em);
 /* Make sure to use the fully qualified class name for your Entity, in this
 *  case it&#39;s \App\Entity\User, and then tell Faker just how many of those
*  you want. Here, we&#39;re making 5 users.
 */
 $populator-&gt;AddEntity(&#39;\App\Entity\User&#39;, 5);

 //You can store the fake data, as well.
 $insertedFakeData = $populator-&gt;execute();
</code></pre><p>That&#39;s the long and short of it. Faker has filled your database with fake data. Faker will take a look at the metadata and names of your columns and
try to choose appropriate fake data to fill it with. For example, Faker will fill a column <code>name</code>
with real-looking names, not lorem ipsum.</p></div></body></html>